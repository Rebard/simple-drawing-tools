(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(t,e,n){t.exports=n.p+"static/media/hexagon.ad81c3f7.svg"},16:function(t,e,n){t.exports=n.p+"static/media/circle.7859ddb7.svg"},20:function(t,e,n){t.exports=n(38)},26:function(t,e,n){},35:function(t,e,n){},36:function(t,e,n){},37:function(t,e,n){},38:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(4),i=n.n(r),c=(n(26),n(5)),l=n(3),s=n(11),u=n(12),g=n(18),f=n(13),d=n(19),p=n(6),m=n(2),h=n(17),v=(n(35),function(t){var e=t.icon,n=t.iconAlt,r=(t.hoverTitle,t.onClick),i=Object(a.useState)(!1),c=Object(h.a)(i,2);c[0],c[1];return o.a.createElement("div",{className:"control-button",onClick:function(t){t.stopPropagation(),r(t)}},o.a.createElement("img",{src:e,alt:n,className:"control-button__icon"}))});v.defaultProps={hoverTitle:"",icon:null,onClick:Function.prototype};var y=v,b=n(15),C=n.n(b),w=n(16),x=n.n(w),P=(n(36),function(t){var e=t.handlePolygon,n=t.handleCircle;return o.a.createElement("div",{className:"draw-control"},o.a.createElement(y,{icon:C.a,iconAlt:"polygon",onClick:e}),o.a.createElement(y,{icon:x.a,iconAlt:"circle",onClick:n}))}),j=o.a.forwardRef(function(t,e){return o.a.createElement("polygon",Object.assign({ref:e},t))}),O=Object(a.memo)(j),E=o.a.forwardRef(function(t,e){return o.a.createElement("circle",Object.assign({ref:e},t))}),k=Object(a.memo)(E),A=o.a.forwardRef(function(t,e){var n=t.children,a=Object(c.a)(t,["children"]);return o.a.createElement("svg",Object.assign({version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"100%",height:"100%",ref:e,style:{position:"relative"}},a),n)}),M=Object(a.memo)(A),S=(n(37),Object(p.b)({accessToken:"pk.eyJ1IjoicmVicmFuZCIsImEiOiJjangxdHhoYjUwMWZyNGFtcWU4emJ6cHNlIn0.4LJRH7zN8ZDH1ZzHhv5V8A"})),L={stroke:"orange",fill:"orange",fillOpacity:.3,strokeWidth:"0.01"},W={fill:"#0097DC",fillOpacity:.3,stroke:"blue",strokeWidth:"0.01"},N=function(t){function e(){var t,n;Object(s.a)(this,e);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(g.a)(this,(t=Object(f.a)(e)).call.apply(t,[this].concat(r)))).state={figureDrawing:null,pointsPolygon:[],centerCircle:null,areaCircle:null,polygons:[],circles:[],viewBox:null},n.refPolygon=o.a.createRef(),n.refCircle=o.a.createRef(),n.map=o.a.createRef(),n.handleControlButton=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(){n.setState({figureDrawing:t,pointsPolygon:[],centerCircle:null})}},n.addPointPolygon=function(t){n.setState(function(e){return{pointsPolygon:[].concat(Object(l.a)(e.pointsPolygon),[[t.lng,t.lat]])}},function(){n.drawPolygon(t)})},n.addPointCircle=function(t){var e=n.state,a=e.centerCircle,o=e.areaCircle,r=n.refCircle.current;if(a){var i=r.getAttribute("cx"),c=r.getAttribute("cy"),s=r.getAttribute("r");n.setState(function(t){return{circles:[].concat(Object(l.a)(t.circles),[{cx:i,cy:c,r:s,area:o}]),centerCircle:null,areaCircle:null,figureDrawing:null}})}else n.setState({centerCircle:[t.lng,t.lat]},function(){n.drawCircle(t)})},n.drawPolygon=function(t){var e=n.state.pointsPolygon,a=n.refPolygon.current;if(a){var o=a.getAttribute("points");(o=o?o.split(" "):[]).length>e.length&&o.pop();var r=n.getWorldCoordinate(t.lat,t.lng),i=n.getPointSvg(r),c=i.x,s=i.y,u=[].concat(Object(l.a)(o),[[c,s]]);a.setAttribute("points",u.join(" "))}},n.getPointSvg=function(t){return{x:(1e3*t.x).toFixed(3),y:(1e3*t.y).toFixed(3)}},n.boundsChanged=function(t){n.setupViewbox(t)},n.setupViewbox=function(t){var e=n.getCurrentViewboxSvg(t);n.setState({viewbox:e})},n.getCurrentViewboxSvg=function(t){var e=t.getBounds(),a=n.getWorldCoordinate(e._ne.lat,e._ne.lng),o=n.getWorldCoordinate(e._sw.lat,e._sw.lng),r=n.getPointSvg(o),i=r.x,c=r.y,l=n.getPointSvg(a),s=l.x,u=l.y,g=s-i,f=c-u;return"".concat(i," ").concat(u," ").concat(g," ").concat(f)},n.handleClickMap=function(t,e){n.setupViewbox(t);var a=n.state.figureDrawing;"circle"===a&&n.addPointCircle(e.lngLat),"polygon"===a&&n.addPointPolygon(e.lngLat)},n.getWorldCoordinate=function(t,e){var n=Math.sin(t*Math.PI/180);return n=Math.min(Math.max(n,-.9999),.9999),{x:512*(.5+e/360),y:512*(.5-Math.log((1+n)/(1-n))/(4*Math.PI))}},n.drawCircle=function(t){var e=n.state.centerCircle,a=n.refCircle.current;if(a){var o=n.getWorldCoordinate(e[1],e[0]),r=n.getWorldCoordinate(t.lat,t.lng),i=n.getPointSvg(o),c=i.x,l=i.y,s=n.getPointSvg(r),u=s.x-c,g=s.y-l,f=Math.sqrt(u*u+g*g);a.setAttribute("cx",c),a.setAttribute("cy",l),a.setAttribute("r",f)}},n.mouseMoveMap=function(t,e){var a=n.state,o=a.figureDrawing,r=a.pointsPolygon,i=a.centerCircle;if("polygon"===o&&r.length&&n.drawPolygon(e.lngLat),"circle"===o&&i){n.drawCircle(e.lngLat);var c=n.calculateAreaCircle(i,e.lngLat);n.setState({areaCircle:c})}},n.calculateAreaCircle=function(t,e){if(t){var n=e.lng-t[0],a=e.lat-t[1],o=Math.sqrt(n*n+a*a);if(o){var r=Object(m.circle)(t,o,{units:"degrees"});return Object(m.area)(r).toFixed(2)}}},n.handleClickPoint=function(t){return function(){var e=n.state.pointsPolygon;if(e.length>2&&e[0].x===t.x&&e[0].y===t.y&&n.refPolygon.current){var a=n.refPolygon.current.getAttribute("points").split(" ");a.splice(-2);var o=n.calculateAreaPolygon(a),r=n.getCenterPolygon(a);n.setState(function(t){return{figureDrawing:null,polygons:[].concat(Object(l.a)(t.polygons),[{points:a,area:o,center:r}]),pointsPolygon:[]}})}}},n.getAdditionlOptions=function(t){var e={};if(t<12){var n=5*Math.floor(t)/t;e.strokeDasharray="".concat(n," ").concat(n/5),e.strokeWidth="".concat(n/5)}return e},n.getCenterPolygon=function(t){var e=t.reduce(function(t,e){var n=e.split(",");return{totalLat:t.totalLat+ +n[0],totalLng:t.totalLng+ +n[1]}},{totalLat:0,totalLng:0});return{x:e.totalLat/t.length,y:e.totalLng/t.length}},n.calculateAreaPolygon=function(t){var e=t.map(function(t){return t.split(",").map(function(t){return t/1e3})});return e.push(e[0]),Object(m.area)(Object(m.polygon)([e])).toFixed(2)},n}return Object(d.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this,e=this.state,n=e.figureDrawing,a=e.pointsPolygon,r=e.centerCircle,i=e.polygons,l=e.circles,s=e.viewbox,u=e.areaCircle,g=this.map.current?this.getAdditionlOptions(this.map.current.state.map.getZoom()):{};return o.a.createElement(S,{ref:this.map,style:"mapbox://styles/mapbox/streets-v8",defaultZoom:[8],maxZoom:[3],containerStyle:{height:"100vh",width:"100vw"},className:"".concat(n&&"draw"),onClick:this.handleClickMap,onMouseMove:this.mouseMoveMap,onMove:this.boundsChanged},o.a.createElement(P,{handleCircle:this.handleControlButton("circle"),handlePolygon:this.handleControlButton("polygon")}),o.a.createElement(M,{viewBox:s},"polygon"===n&&o.a.createElement(O,Object.assign({ref:this.refPolygon},L,g)),"circle"===n&&o.a.createElement(k,Object.assign({ref:this.refCircle},L,g)),i.map(function(t){var e=t.points.join(" "),n=t.center,a=n.x,r=n.y;return o.a.createElement(o.a.Fragment,null,o.a.createElement(O,Object.assign({},W,g,{points:e})),o.a.createElement("text",{x:a,y:r,className:"text"},t.area," \u043a\u0432.\u043c"))}),l.map(function(t){t.area;var e=Object(c.a)(t,["area"]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(k,Object.assign({},W,g,e)),o.a.createElement("text",{className:"text"}))})),a.map(function(e){return o.a.createElement(p.a,{coordinates:e},o.a.createElement("div",{className:"point",onClick:t.handleClickPoint(e)}))}),r&&o.a.createElement(p.a,{coordinates:r},o.a.createElement("div",{className:"point"},o.a.createElement("span",{className:"text"},u," \u043a\u0432.\u043c"))))}}]),e}(a.PureComponent);var D=function(){return o.a.createElement(N,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[20,1,2]]]);
//# sourceMappingURL=main.b70fd988.chunk.js.map